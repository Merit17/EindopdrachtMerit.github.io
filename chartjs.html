<!DOCTYPE html>
<html>
<head>
<title>Defensie locaties</title>

<link rel="stylesheet" type="text/css" href="Main.css">

</head>
<body>

<div class="header">
    <h1>Data Visualisaties</h1>
</div>

<!-- Top Navigation Menu -->
<div class="topnav">
  <a href="index.html" class="active">Home</a>
    <a href="KaartArcGIS.html">Kaart Kazernes</a>
    <a href="Kaarten.html">Kaart Oefenterrein</a>
    <a href="KaartLeaflet.html">Kaart Vliegbasis</a>
    <a href="KaartOpenLayers.html">Kaart Maritiem gebied</a>
    <a href="KaartEmbed.html">Kaart Navo</a>
    <a href="chartjs.html">Visualisaties</a>
  <a href="javascript:void(0);" class="icon" onclick="myFunction()">
    <i class="fa fa-bars"></i>
  </a>
</div>

<!--Text-->
<div class="text"><p><b>Verschillende kazernes</b></p>
</div>

<!--Text-->
<div class="left"><p>Zoals in een eerdere kaart te zien is zijn er op verschillende locaties in Nederland kazernes te vinden.
  De staafdiagram geeft de verschillende soorten kazernes weer.
</p>
</div>

<!--Chart-->
<div>
    <canvas id="myChart"></canvas>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script>
    const ctx = document.getElementById('myChart');
  
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Landstrijdkrachten', 'Zeestrijdkrachten', 'Ondersteuningscommando', 'Marechaussee'],
        datasets: [{
          label: '# kazernes',
          data: [22, 6, 10, 1],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>

<!--Text-->
<div class="text"><p><b>Navo Lidstaten</b></p>
</div>

<!--Text-->
<div class="left"><p>Dit is een visualisatie van alle landen van de wereld, naast het aantal landen die lid zijn van de Navo. Zo is de vergelijking goed te zien dat 30 van de 196 landen op de wereld lid zijn van de Navo. 
</p>
</div>

<!-- Load d3.js & color scale -->
<script src="http://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Create a div where the graph will take place -->
<div id="chart1"></div>

<script>

  // set the dimensions and margins of the graph
  var width = 750
      height = 450
      margin = 0
  
  // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
  var radius = Math.min(width, height) / 3 - margin
  
  // append the svg object to the div called 'dataviz'
  var svg = d3.select("#chart1")
    .append("svg")
      .attr("width", width)
      .attr("height", height)
    .append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
  
  // Create dummy data
  var data = {Landen: 196, Navo: 30}
  
  // set the color scale
  var color = d3.scaleOrdinal()
    .domain(["Landen", "Navo"])
    .range(d3.schemeSet1); 
  
  // Compute the position of each group on the pie:
  var pie = d3.pie()
    .sort(null) // Do not sort group by size
    .value(function(d) {return d.value; })
  var data_ready = pie(d3.entries(data))
  
  // The arc generator
  var arc = d3.arc()
    .innerRadius(radius * 0.5)         // This is the size of the donut hole
    .outerRadius(radius * 0.8)
  
  // Another arc that won't be drawn. Just for labels positioning
  var outerArc = d3.arc()
    .innerRadius(radius * 0.9)
    .outerRadius(radius * 0.9)
  
  // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
  svg
    .selectAll('allSlices')
    .data(data_ready)
    .enter()
    .append('path')
    .attr('d', arc)
    .attr('fill', function(d){ return(color(d.data.key)) })
    .attr("stroke", "white")
    .style("stroke-width", "2px")
    .style("opacity", 0.7)
  
  // Add the polylines between chart and labels:
  svg
    .selectAll('allPolylines')
    .data(data_ready)
    .enter()
    .append('polyline')
      .attr("stroke", "black")
      .style("fill", "none")
      .attr("stroke-width", 1)
      .attr('points', function(d) {
        var posA = arc.centroid(d) // line insertion in the slice
        var posB = outerArc.centroid(d) // line break: we use the other arc generator that has been built only for that
        var posC = outerArc.centroid(d); // Label position = almost the same as posB
        var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 // we need the angle to see if the X position will be at the extreme right or extreme left
        posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); // multiply by 1 or -1 to put it on the right or on the left
        return [posA, posB, posC]
      })
  
  // Add the polylines between chart and labels:
  svg
    .selectAll('allLabels')
    .data(data_ready)
    .enter()
    .append('text')
      .text( function(d) { console.log(d.data.key) ; return d.data.key } )
      .attr('transform', function(d) {
          var pos = outerArc.centroid(d);
          var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
          pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);
          return 'translate(' + pos + ')';
      })
      .style('text-anchor', function(d) {
          var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
          return (midangle < Math.PI ? 'start' : 'end')
      })
  
  </script>

<!--Text-->
<div class="text"><p><b>Populatie in de wereld</b></p>
</div>

<!--Text-->
<div class="left"><p>Deze kaart is een visualisatie van de populatie aantallen van de wereld. Hoe donkerder de kleur hoe meer mensen er in dat land wonen, hoe lichter de kleur hoe minder mensen er in dat land wonen. 
</p>
</div>

<!--D3-->
<!-- Load d3.js -->
<script src="http://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

<!-- Create an element where the map will take place -->
<svg id="chart2" width="1100" height="300"></svg>

<script>

    // The svg
    var svg = d3.select("#chart2"),
      width = +svg.attr("width"),
      height = +svg.attr("height");
    
    // Map and projection
    var path = d3.geoPath();
    var projection = d3.geoMercator()
      .scale(70)
      .center([0,20])
      .translate([width / 2, height / 2]);
    
    // Data and color scale
    var data = d3.map();
    var colorScale = d3.scaleThreshold()
      .domain([100000, 1000000, 10000000, 30000000, 100000000, 500000000])
      .range(d3.schemeBlues[7]);
    
    // Load external data and boot
    d3.queue()
      .defer(d3.json, "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson")
      .defer(d3.csv, "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world_population.csv", function(d) { data.set(d.code, +d.pop); })
      .await(ready);
    
    function ready(error, topo) {
    
      let mouseOver = function(d) {
        d3.selectAll(".Country")
          .transition()
          .duration(200)
          .style("opacity", .5)
        d3.select(this)
          .transition()
          .duration(200)
          .style("opacity", 1)
          .style("stroke", "black")
      }
    
      let mouseLeave = function(d) {
        d3.selectAll(".Country")
          .transition()
          .duration(200)
          .style("opacity", .8)
        d3.select(this)
          .transition()
          .duration(200)
          .style("stroke", "transparent")
      }
    
      // Draw the map
      svg.append("g")
        .selectAll("path")
        .data(topo.features)
        .enter()
        .append("path")
          // draw each country
          .attr("d", d3.geoPath()
            .projection(projection)
          )
          // set the color of each country
          .attr("fill", function (d) {
            d.total = data.get(d.id) || 0;
            return colorScale(d.total);
          })
          .style("stroke", "transparent")
          .attr("class", function(d){ return "Country" } )
          .style("opacity", .8)
          .on("mouseover", mouseOver )
          .on("mouseleave", mouseLeave )
        }
    
    </script>

<!--Footer-->
<div class="footer">
  <p>Copyright 2022 by Merit van Doleweerd</p>
</div>

<!-- End smartphone / tablet look -->
</div>

<script>
function myFunction() {
  var x = document.getElementById("myLinks");
  if (x.style.display === "block") {
    x.style.display = "none";
  } else {
    x.style.display = "block";
  }
}
</script>
</body>
</html>